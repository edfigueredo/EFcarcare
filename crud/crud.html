<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../img/logo.ico">
    <link rel="icon" href="../img/logo.JPG">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/crud.css">
    <!-- Script de Fontawesome -->
    <script src="https://kit.fontawesome.com/53b92063da.js" crossorigin="anonymous"></script>
    <!-- Titulo -->
    <title>EF Car Care</title>

</head>
<header>
    <div class="menu">
        <ul>
            <li>
                <div>
                    <img src="../img/logo.png" width="200px">
                </div>
            </li>


            <li><a href="#solicitudes" style="color:  #6e4908">Nuevos</a></li>
            <li><a href="#turnos" style="color:  #6e4908">Turnos</a></li>
            <li><a href="#nuevo" style="color:  #6e4908">Nuevo</a></li>

        </ul>
    </div>
</header>

<body>
    <!-- Seccion de solicitud -->
    <section>
        <div id="solicitudes" class="servicios-productos">
            <h2>Nuevas Solicitudes</h2>

            <iframe src="solicitudes.html" style="border:solid #6e4908;">
            </iframe>
         </div>
    </section>

    <!-- Seccion de turnos -->
    <section >
        <div id="turnos" class="servicios-productos-turnos">
            <h2>Turnos</h2>

            <iframe src="turnos.html" style="border:solid #6e4908;">
            </iframe>
        </div>

        

    </section>


    <!-- Nuevo turnos -->
    <section id="nuevo">
        <div class="servicios-productos">
            <h2 >Nuevo</h2>
        </div>

        <!-- Container de formulario -->
        <div class="form-contact">
            <div class="form-port">
                <!-- Container de campos del formulario -->
                <form id="myForm" class="form-contact-data" method="post" autocomplete="off" enctype="multipart/form-data">
                    <div class="form-contact-data form-contact-data-1">

                        <label for="nombre" class="label-nombre">Ingrese Nombre</label>
                        <input type="text" class="dato input-nombre" name="nombre" id="nombre" placeholder="Nombre y Apellido" required>

                        <label for="celular">Ingrese Número de contacto</label>
                        <input type="tel" id="celular" class="dato input-contacto" name="celular" placeholder="N° de Celular de 7 a 11" required>

                        <h3 class="title-service">Servicios Interesados</h3>
                        <div class="servicios-interez">
                            <label for="modelo1">Corrección de barniz - Tratamientos</label>
                            <input type="checkbox" id="modelo1" name="servicios[]" value="Corrección de barniz - Tratamientos">

                            <label for="modelo2">Ploteos - Película protectora PPF</label>
                            <input type="checkbox" id="modelo2" name="servicios[]" value="Ploteos - Película protectora PPF">

                            <label for="modelo3">Limpieza interior - motores - chasis</label>
                            <input type="checkbox" id="modelo3" name="servicios[]" value="Limpieza interior - motores - chasis">

                            <label for="modelo4">Lavado detallados</label>
                            <input type="checkbox" id="modelo4" name="servicios[]" value="Lavado detallados">

                            <label for="modelo5">Reparación, pintura de llantas o piezas</label>
                            <input type="checkbox" id="modelo5" name="servicios[]" value="Reparación, pintura de llantas o piezas">
                        </div>
                    <br>
                        <label for="fecha"><h3>Seleccion una fecha</h3></label>
                        <input type="date" id="fecha" name="fecha" class="dato input-contacto">
                        
                        <label for="hora" ><h3>Seleccione una hora</h3></label>
                        <input type="time" id="hora" name="hora" class="dato input-contacto">

                    </div>
                    <div class="form-contact-data form-contact-data-2">

                        <label for="patente">Ingrese la patente</label>
                        <input type="text" id="patente" class="dato input-contacto" name="patente" placeholder="Patente del vehículo">

                        <label for="vehiculo">Ingrese tipo de vehículo</label>
                        <select id="vehiculo" class="select-vehiculo" name="vehiculo">
                            <option value="">Tipo de vehículo</option>
                            <option value="pickup-suv">Pick up - SUV</option>
                            <option value="sedan">Sedan</option>
                            <option value="embarcacion">Embarcación</option>
                            <option value="motocicleta-cuatriciclo">Motocicleta - Cuatriciclo</option>
                        </select>

                        <div class="adj-file">
                            <label for="archivo">
                                Ingrese una imagen del vehículo <br>
                                <img src="/img/submit.png" alt="subir"><br>
                                <small id="upload-img">Su selección es...</small>
                            </label>
                            <input type="file" name="archivo" id="archivo" class="upload-arch">
                        </div>

                        <h3><br>¿Desea insertar un comentario?</h3>
                        <textarea class="text-area" name="observaciones" rows="10" cols="30" id="observaciones" placeholder="Agregue un comentario aquí..."></textarea>

                        

                        <button type="submit" id="boton">Generar turno</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <script>
        const URL = "http://127.0.0.1:5000/";

        document.getElementById('myForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Evita que se envíe el formulario

            const formData = new FormData(this);

            fetch(URL + 'turnos', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    alert('Turno agendado correctamente.');
                    // Puedes agregar más lógica aquí si es necesario
                })
                .catch(error => {
                    alert('Error al generar el turno.');
                    console.error('Error:', error);
                })
                .finally(() => {
                    document.getElementById('myForm').reset();
                });
        });
    </script>

</body>

</html>